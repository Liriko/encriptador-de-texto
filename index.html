<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="reset.css">
	<link rel="stylesheet" href="style.css">
    <title>Encriptador de texto</title>
</head>
<body>
    <header>
        <div>
            <img src="img/Vector.png" alt="Logo Alura Latam" class="logo">
        </div>
    </header>
    <main>
        <div>
            <textarea id="mensaje-entrada" cols="30" rows="10"></textarea>
        </div>
        <div>
            <ul>
                <li><button id="boton-encriptar">Encriptar</button></li>
                <li><button id="boton-desencriptar">Desencriptar</button></li>
            </ul>           
        </div>
        <div>
            <textarea id="mensaje-salida" cols="30" rows="10"></textarea>
        </div>
    </main>
    <footer>
    </footer>
</body>
</html>

<script>

    let mensajeEntrada = document.querySelector("#mensaje-entrada");
    let botonEncriptar = document.querySelector("#boton-encriptar");
    let botonDesencriptar = document.querySelector("#boton-desencriptar");
    let mensajeSalida = document.querySelector("#mensaje-salida");

    botonEncriptar.onclick = encriptarTexto;
    botonDesencriptar.onclick = desencriptarTexto;

    function esValido(texto){

    let respuesta = true;
    let ascii;
    const textoDescompuesto = descomponerTexto(texto);

    // validar mayúsculas y carácteres especiales
    for(let i = 0; i < textoDescompuesto.length; i++){
        if(textoDescompuesto[i] != " "){
            if(textoDescompuesto[i] === textoDescompuesto[i].toUpperCase())
                respuesta = false;
            ascii = textoDescompuesto[i].charCodeAt(0);
            if(ascii < 64 && ascii > 91)
                respuesta = false;
        }
    }

    return respuesta;
    }

    function encriptarTexto(){ 

        let texto = mensajeEntrada.value;

        if(esValido(texto)){
            texto = texto.replaceAll("e", "enter");
            texto = texto.replaceAll("o", "ober");
            texto = texto.replaceAll("u", "uaft");
            texto = texto.replaceAll("i", "imes");
            texto = texto.replaceAll("a", "ai");
        } else
        texto = "Texto inválido";
        
        mensajeSalida.value = texto;
    }

    function desencriptarTexto(){

        let texto = mensajeEntrada.value;

        texto = texto.replaceAll("enter", "e"); 
        texto = texto.replaceAll("ober", "o");
        texto = texto.replaceAll("uaft", "u");
        texto = texto.replaceAll("imes", "i");
        texto = texto.replaceAll("ai", "a");

        mensajeSalida.value = texto;
    }

    function descomponerTexto(texto){
        return texto.split('');
    }
</script>
